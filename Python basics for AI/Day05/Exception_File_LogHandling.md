# Exception/File/Log Handling

## 1. Exception

예외의 종류에는 크게 두가지가 있다.

- 예상 가능한 예외
- 예상 불가능한 예외

**예상 가능한 예외**

예상 가능한 예외는 발생여부를 사전에 인지할 수 있는 예외이다.

사용자의 잘못된 입력이나 파일 호출 시 파일이 없을 때 발생한다. 개발자가 반드시 **명시적**으로 정의해줘야한다.

**예상 불가능한 예외**

인터프리터 과정에서 발생하는 예외. 개발자의 실수로 인해 발생한다.

리스트의 범위를 넘어가는 값을 호출하거나 정수를 0으로 나누는 것이 있다.

수행 불가시 인터프리터가 자동 호출된다.

### Exception Handling

예외가 발생할 경우 후속 조치 등 대처가 필요하다. 파이썬의 예외 처리에는 어떤 것들이 있는지 알아보자.

#### Exception 문법

`exception.py`를 참고한다.

#### Exception 종류

| Exception 이름    | 내용                                 |
| ----------------- | ------------------------------------ |
| IndexError        | List의 Index 범위를 넘어갈 때        |
| NameError         | 존재하지 않는 변수를 호출            |
| ZeroDivisionError | 0으로 숫자를 나눌 때                 |
| ValueError        | 변환할 수 없는 문자/숫자를 변환할 때 |
| FileNotFoundError | 존재하지 않는 파일을 호출            |



## 2. File Handling

### 파일의 종류

기본적인 파일 종류로 text 파일과 binary 파일로 나눈다.

컴퓨터는 text 파일을 처리하기 위해 binary 파일로 변환시킨다. 따라서 모든 text 파일은 사실상 binary 파일이지만, 변환 전에는 ASCII/Unicode 문자열 집합으로 저장되어 사람이 읽을 수 있다.

### Python file I/O

파이썬은 파일 처리를 위해 `open` 키워드를 사용한다.

`file` 디렉토리를 참고

### Log 파일 생성

### Pickle

파이썬의 객체를 영속화하는 built-in 객체이다.

데이터, object 등 실행중 정보를 저장하고 불러와서 사용한다.

저장해야하는 정보, 계산 결과(모델) 등 활용이 많기때문에 기억해두는 것이 좋다.

`pickle` 디렉토리 참고

## 3. Log Handling

### Logging

로그 남기기(Logging)은 프로그램이 실행되는 동안 일어나는 정보를 기록으로 남기는 것이다.

유저의 접근, 프로그램의 Exception, 특정 함수의 사용 등등을 기록으로 남길 수 있다.

남기는 방법으로는 Console 화면에 출력하거나, 파일에 남기기, DB에 남기는 방법이 있다.

이렇게 기록된 로그를 분석하여 의미있는 결과를 도출할 수 있으므로 로깅은 중요한 개념이다.

>print vs logging
>
>기록을 print로 남기는 것도 가능하지만 Console 창에만 남기는 기록은 분석시 사용이 불가하다.
>
>또한 때로는 레벨별(개발,운영)로 기록을 남길 필요도 있고 모듈별로 기록을 남길필요도 있다.
>
>그렇기 때문에 이러한 기록을 체계적으로 남기는 것이 중요한데 파이썬에는 이러한 로깅 기능을 지원하는 모듈이 있다.

### Logging 모듈

`logging` 디렉토리  참고

#### logging level

파이썬은 프로그램 진행 상황에 따라 다른 level의 log를 출력하고 개발 시점, 운영시점 마다 다른 log가 남을 수 있도록 관련 기능을 지원한다.

DEBUG > INFO > WARNING > ERROR > CRITICAL 의 레벨이 있고 Log 관리시 가장 기본이 되는 설정 정보이다.

| level    | 개요                                                         | 예시                                                         |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| DEBUG    | 개발시 처리 기록을 남겨야하는 로그 정보를 남김               | - 다음함수로 A 호출<br />- 변수 A를 무엇으로 변경함          |
| INFO     | 처리가 진행되는 동안의 정보를 알림                           | - 서버가 시작됨<br />- 서버가 종료됨<br />- 사용자 A가 프로그램에 접속함 |
| WARNING  | 사용자가 잘못 입력한 정보나 처리는 가능하나 원래 개발시 의도치 않는 정보가 들어왔을 때 알림 | - str 입력을 기대했으나, int가 입력됨<br />- 함수에 argument로 이차원 리스트를 기대했으나 일차원 리스트가 들어옴, 이차원으로 변환 후 처리 |
| ERROR    | 잘못된 처리로 인해 에러가 났으나, 프로그램은 동작할 수 있음을 알림 | - 파일에 기록을 해야하는데 파일이 없음 -> Exception 처리 후 사용자에게 알림<br />- 외부 서비스와 연결 불가 |
| CRITICAL | 잘못된 처리로 데이터 손실이나 더이상 프로그램이 동작할 수 없음을 알림 | - 잘못된 접근으로 해당 파일이 삭제됨<br />- 사용자에 의한 강제 종료 |

## 4. 설정

실제 프로그램을 실행할 땐 여러 설정이 필요한데,

데이터 파일 위치, 파일 저장 장소, Operation Type 등 이러한 정보를 설정해줄 방법이 필요하다.

`config` 디렉터리 참고

### configparser

- 프로그램의 실행 설정을 file에 저장
- section, key, value 값의 형태로 설정된 설정 파일을 사용
- 설정파일을 Dict Type으로 호출 후 사용

### argparser

- console 창에서 프로그램 실행시 setting 정보를 저장함
- 거의 모든 console 기반 python 프로그램 기본으로 제공
- 특수 모듈도 많이 존재하지만(TF), 일반적으로 argparse를 사용
- command-line option 이라고 부름

